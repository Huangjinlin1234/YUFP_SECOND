function submitForm(){var i=this,e=i.$refs.baseRef,l=i.$refs.familyRef,a=i.$refs.otherRef,t=!0,o=!0,f=!0;if(e.validate(function(e){t=e}),l.validate(function(e){o=e}),a.validate(function(e){f=e}),t&&o&&f){var d={};yufp.extend(d,e.formModel),yufp.extend(d,l.formModel),yufp.extend(d,a.formModel),console.log(e.formModel),console.log(l.formModel),console.log(a.formModel);"EDIT"==i.viewType?"PUT":"POST",yufp.service.request({method:"POST",url:"/trade/api/demo/save",data:d,callback:function(e,l,a){0==e&&(i.$refs.reftable.remoteData(),i.$message("操作成功"),i.dialogVisible=!1)}})}}function deleteFn(){var i=this,e=i.$refs.reftable.selections;if(e.length<1)i.$message({message:"请先选择一条记录",type:"warning"});else{for(var l=e.length,a=[],t=0;t<l;t++)a.push(e[t].id);yufp.service.request({method:"DELETE",url:"/trade/api/demo/delete",data:{ids:a.join(",")},callback:function(e,l,a){console.log(e),0==e&&(i.$refs.reftable.remoteData(),i.$message("操作成功"))}})}}function getInfo(){var i=this;1==this.$refs.reftable.selections.length?(i.resetForm(),this.switchStatus("DETAIL",!0),this.$nextTick(function(){var e=this.$refs.reftable.selections[0].id;yufp.service.request({method:"GET",url:"/trade/api/demo/info",data:{id:e},callback:function(e,l,a){0==e&&(a.barthday=new Date(a.barthday),yufp.extend(i.$refs.baseRef.formModel,a),yufp.extend(i.$refs.familyRef.formModel,a),yufp.extend(i.$refs.otherRef.formModel,a),yufp.extend(i.$refs.obligateRef.formModel,a))}})})):this.$message({message:"请先选择一条记录",type:"warning"})}define(["./custom/widgets/js/YufpOrgTree.js"],function(e,l){l.ready=function(e,l,a){yufp.lookup.reg("CRUD_TYPE, GENDER,EDUCATION_TYPE,IDENT_TYPE");yufp.custom.vue({el:a.el,data:function(){var i=this;return{tabName:"first",dialogVisible:!1,formDisabled:!1,viewType:"DETAIL",viewTitle:yufp.lookup.find("CRUD_TYPE",!1),expandCollapseName:["base"],baseParams:{condition:{userId:"admin"},nonCondParam1:"1",nonCondParam2:"2"},queryFields:[{placeholder:"姓名",field:"name",type:"input"},{placeholder:"性别",field:"gender",type:"select",dataCode:"GENDER"}],queryButtons:[{label:"查询",op:"submit",type:"primary",icon:"search",click:function(e,l){if(l){var a={condition:JSON.stringify(e)};i.$refs.reftable.remoteData(a)}}},{label:"重置",op:"reset",type:"primary",icon:"yx-loop2"}],tableColumns:[{label:"姓名",prop:"name",template:function(){return'<template scope="scope">                                <a href="#" style="text-decoration:underline;" @click="$emit(\'custom-row-click\', scope)">{{ scope.row.name }}</a>                            </template>'}},{label:"性别",prop:"gender",dataCode:"GENDER",sortable:!0,resizable:!0},{label:"学历",prop:"education",dataCode:"EDUCATION_TYPE"},{label:"证件类型",prop:"cardType",dataCode:"IDENT_TYPE"},{label:"出生日期",prop:"barthday"},{label:"证件号码",prop:"cardNo"},{label:"公司",prop:"company"},{label:"邮箱",prop:"email"}],baseFields:[{columnCount:3,fields:[{field:"id",label:"ID"},{field:"name",label:"姓名",maxlength:10},{field:"orgId",label:"所属机构",type:"custom",is:"yufp-org-tree",param:{needDpt:!0,needCheckbox:!1}},{field:"gender",label:"性别",type:"select",dataCode:"GENDER",change:function(e,l){i.$data.baseFields[0].fields[0].hidden="01"==e}},{field:"education",label:"学历",type:"select",dataCode:"EDUCATION_TYPE"},{field:"cardType",label:"证件类型",type:"select",dataCode:"IDENT_TYPE"},{field:"barthday",label:"出生日期",type:"date",format:"yyyy-MM-dd",editable:!1},{field:"cardNo",label:"证件号码"},{field:"company",label:"公司"},{field:"email",label:"邮箱"},{field:"mount",label:"家庭收入",type:"num",digit:2,formatter:yufp.util.moneyFormatter}]}],familyFields:[{columnCount:3,fields:[{field:"peopleNum",label:"成员数",rules:[{required:!0,message:"必填项",trigger:"blur"},{validator:yufp.validator.number}]},{field:"home",label:"房屋情况"},{field:"address",label:"家庭地址"},{field:"postcode",label:"邮政编码"}]}],otherFields:[{columnCount:3,fields:[{field:"obligate1",label:"预留字段1",hidden:!0},{field:"obligate2",label:"预留字段2"},{field:"obligate3",label:"预留字段3"},{field:"obligate4",label:"预留字段4"},{field:"obligate5",label:"预留字段5"},{field:"obligate6",label:"预留字段6"},{field:"obligate7",label:"预留字段7"},{field:"obligate8",label:"预留字段8"},{field:"obligate9",label:"预留字段9"},{field:"obligate10",label:"预留字段10"},{field:"obligate11",label:"预留字段11"},{field:"obligate12",label:"预留字段12"},{field:"obligate13",label:"预留字段13"},{field:"obligate14",label:"预留字段14"},{field:"obligate15",label:"预留字段15"},{field:"obligate16",label:"预留字段16"},{field:"obligate17",label:"预留字段17"},{field:"obligate18",label:"预留字段18"},{field:"obligate19",label:"预留字段19"},{field:"obligate20",label:"预留字段20"}]},{columnCount:1,fields:[{field:"desc",label:"备注",type:"textarea"}]}],obligateFields:[{columnCount:3,fields:[{field:"obligate21",label:"预留字段21"},{field:"obligate22",label:"预留字段22"},{field:"obligate23",label:"预留字段23"},{field:"obligate24",label:"预留字段24"},{field:"obligate25",label:"预留字段25"},{field:"obligate26",label:"预留字段26"},{field:"obligate27",label:"预留字段27"},{field:"obligate28",label:"预留字段28"},{field:"obligate29",label:"预留字段29"},{field:"obligate30",label:"预留字段30"},{field:"obligate31",label:"预留字段31"},{field:"obligate32",label:"预留字段32"},{field:"obligate33",label:"预留字段33"},{field:"obligate34",label:"预留字段34"},{field:"obligate35",label:"预留字段35"},{field:"obligate36",label:"预留字段36"},{field:"obligate37",label:"预留字段37"},{field:"obligate38",label:"预留字段38"},{field:"obligate39",label:"预留字段39"},{field:"obligate40",label:"预留字段40"},{field:"obligate41",label:"预留字段41"},{field:"obligate42",label:"预留字段42"},{field:"obligate43",label:"预留字段43"},{field:"obligate44",label:"预留字段44"},{field:"obligate45",label:"预留字段45"},{field:"obligate46",label:"预留字段46"},{field:"obligate47",label:"预留字段47"},{field:"obligate48",label:"预留字段48"},{field:"obligate49",label:"预留字段49"},{field:"obligate50",label:"预留字段50"},{field:"obligate51",label:"预留字段51"},{field:"obligate52",label:"预留字段52"},{field:"obligate53",label:"预留字段53"},{field:"obligate54",label:"预留字段54"},{field:"obligate55",label:"预留字段55"},{field:"obligate56",label:"预留字段56"},{field:"obligate57",label:"预留字段57"},{field:"obligate58",label:"预留字段58"},{field:"obligate59",label:"预留字段59"}]}],baseRules:{name:[{required:!0,message:"必填项",trigger:"blur"},{max:10,message:"长度不能大于10个字符",trigger:"blur"}],gender:[{required:!0,message:"必填项",trigger:"change"}],education:[{required:!0,message:"必填项",trigger:"change"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],barthday:[{type:"date",required:!0,message:"必填项",trigger:"change"}],cardType:[{required:!0,message:"必填项",trigger:"change"}]}}},methods:{customRowClick:function(a){this.switchStatus("EDIT",!0),this.$nextTick(function(){var e=a.row,l={};yufp.extend(l,e,{barthday:new Date(e.barthday)}),yufp.extend(!1,this.$refs.baseRef.formModel,l),yufp.extend(!1,this.$refs.familyRef.formModel,l),yufp.extend(!1,this.$refs.otherRef.formModel,l),yufp.extend(!1,this.$refs.obligateRef.formModel,l),console.log(this.$refs.baseRef.formModel),console.log(this.$refs.familyRef.formModel),console.log(this.$refs.otherRef.formModel),console.log(this.$refs.obligateRef.formModel)})},checkPermission:function(e){return!0},switchStatus:function(e,l){var a=this;a.viewType=e,a.formDisabled=!l,a.dialogVisible=!0},addFn:function(){var e=this;e.switchStatus("ADD",!0),e.tabName="first",e.$nextTick(function(){e.resetForm(),this.$data.baseFields[0].fields[0].hidden=!1})},modifyFn:function(){1==this.$refs.reftable.selections.length?(this.switchStatus("EDIT",!0),this.$nextTick(function(){var e=this.$refs.reftable.selections[0],l={};yufp.extend(l,e,{barthday:new Date(e.barthday)}),yufp.util.copyObj(this.$refs.baseRef.formModel,l),yufp.util.copyObj(this.$refs.familyRef.formModel,l),yufp.util.copyObj(this.$refs.otherRef.formModel,l),yufp.util.copyObj(this.$refs.obligateRef.formModel,l)})):this.$message({message:"请先选择一条记录",type:"warning"})},infoFn:function(){1==this.$refs.reftable.selections.length?(this.switchStatus("VIEW",!0),this.$nextTick(function(){var e=this.$refs.reftable.selections[0],l={};yufp.extend(l,e,{barthday:new Date(e.barthday)}),yufp.util.copyObj(this.$refs.baseRef.formModel,l),yufp.util.copyObj(this.$refs.familyRef.formModel,l),yufp.util.copyObj(this.$refs.otherRef.formModel,l),yufp.util.copyObj(this.$refs.obligateRef.formModel,l)})):this.$message({message:"请先选择一条记录",type:"warning"})},deleteFn:deleteFn,exportFn:function(){yufp.util.exportExcelByTable({fileName:"下载文件",importType:"service",ref:this.$refs.reftable,url:"/trade/example/list",param:{}})},submitForm:submitForm,resetForm:function(){var e=this;e.$refs.baseRef.resetFields(),e.$refs.familyRef.resetFields(),e.$refs.otherRef.resetFields(),e.$refs.obligateRef.resetFields()},genderChange:function(e,l){console.log(e),console.log(l)}}})},l.onmessage=function(e,l){},l.destroy=function(e,l){}});