define(function(e,t){t.ready=function(e,t,i){yufp.lookup.reg("CRUD_TYPE,NATIONALITY,PUBLISH_STATUS"),yufp.custom.vue({el:i.el,data:function(){var r=this;return{baseParams:{condition:{userId:"admin"},nonCondParam1:"1",nonCondParam2:"2"},queryFields:[{placeholder:"机构码",field:"orgCode",type:"input"},{placeholder:"机构名称",field:"orgName",type:"input"}],queryButtons:[{label:"查询",op:"submit",type:"primary",icon:"search",click:function(e,t){if(t){var i={condition:JSON.stringify(e)};r.$refs.reftable.remoteData(i)}}},{label:"重置",op:"reset",type:"primary",icon:"yx-loop2"}],tableColumns:[{label:"机构码",prop:"orgCode"},{label:"机构名称",prop:"orgName",sortable:!0,resizable:!0},{label:"法人机构代码",prop:"legalOrgCode"}],updateFields:[{columnCount:2,fields:[{field:"orgCode",label:"机构码",rules:[{required:!0,message:"必填项",trigger:"blur"}]},{field:"orgName",label:"机构名称"},{field:"legalOrgCode",label:"法人机构代码"}]}],updateButtons:[{label:"取消",type:"primary",icon:"yx-undo2",hidden:!1,click:function(e){r.dialogVisible=!1}},{label:"保存",type:"primary",icon:"check",hidden:!1,click:function(e){var t=!1;r.$refs.reform.validate(function(e){t=e}),t&&yufp.service.request({method:"PUT",url:"/api/s/org",data:e,callback:function(e,t,i){0==e&&(r.$refs.reftable.remoteData(),r.$message("操作成功"),r.dialogVisible=!1)}})}}],height:yufp.frame.size().height-103,dialogVisible:!1,formDisabled:!1,viewType:"DETAIL",viewTitle:yufp.lookup.find("CRUD_TYPE",!1)}},methods:{switchStatus:function(e,t){var i=this;i.viewType=e,i.updateButtons[1].hidden=!t,i.formDisabled=!t,i.dialogVisible=!0},addFn:function(){var e=this;e.switchStatus("ADD",!0),e.$nextTick(function(){e.$refs.reform.resetFields()})},modifyFn:function(){1==this.$refs.reftable.selections.length?(this.switchStatus("EDIT",!0),this.$nextTick(function(){var e=this.$refs.reftable.selections[0];yufp.extend(this.$refs.reform.formModel,e)})):this.$message({message:"请先选择一条记录",type:"warning"})},infoFn:function(){1==this.$refs.reftable.selections.length?(this.switchStatus("DETAIL",!1),this.$nextTick(function(){yufp.extend(this.$refs.reform.formModel,this.$refs.reftable.selections[0])})):this.$message({message:"请先选择一条记录",type:"warning"})},deleteFn:function(){var r=this,e=r.$refs.reftable.selections;if(e.length<1)r.$message({message:"请先选择一条记录",type:"warning"});else{for(var t=e.length,i=[],o=0;o<t;o++)i.push(e[o].orgCode);console.log(i),yufp.service.request({method:"DELETE",url:"/api/s/org",data:{orgCode:i.join(",")},callback:function(e,t,i){0==e&&(r.$refs.reftable.remoteData(),r.$message("操作成功"))}})}},exportFn:function(){yufp.util.exportExcelByTable({fileName:"下载文件",importType:"service",ref:this.$refs.reftable,url:"/trade/example/list",param:{}})}}})},t.onmessage=function(e,t){},t.destroy=function(e,t){}});