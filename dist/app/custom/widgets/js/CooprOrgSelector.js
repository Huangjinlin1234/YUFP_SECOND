var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,a,l){yufp.lookup.reg("ORG_LEVEL,COOPR_STS,COOPR_ORG_TYPE,COOPR_STS"),e.component("div-coopr-org-selector",{template:'<div>            <el-input v-model="selectedVal" readonly :placeholder="placeholderInner" :disabled="disabled"            :size="size" :name="name" :icon="icon" :on-icon-click="onIconClickFn" @click.native="clickFn">            </el-input>            <el-dialog title="机构列表" :visible.sync="dialogVisible" size="large">               <el-form-q ref="queryForm" v-if="queryFlag" @search-click="queryClick" :field-data="queryFields"></el-form-q>              <el-table-x ref="mytable" :data-url="dataUrl" @row-click="rowClickFn" :default-load="false"                :table-columns="tableColumns" v-loading="myLoading" @loaded="tableLoaded" request-type="POST">              </el-table-x>              <div slot="footer" class="dialog-footer">                <el-button type="primary" @click="confirmFn">确 定</el-button>                <el-button @click="dialogVisible = false">取 消</el-button>              </div>            </el-dialog>          </div>',props:{name:{type:String},value:{required:!0},rawValue:String,size:String,disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"合作机构代码"},icon:{type:String,default:"search"},params:Object},data:function(){return{selections:[],fixedParams:{},cooprOrgType:this.params&&this.params.cooprOrgType||this.params,queryFlag:!0,myLoading:!0,placeholderInner:null!=this.params&&null!=this.params.placeholder?this.params.placeholder:this.placeholder,queryFields:[{placeholder:"合作机构代码",field:"cooprOrgNo",type:"input"},{placeholder:"合作机构名称",field:"cooprOrgName",type:"input"},{placeholder:"合作机构类型",field:"cooprOrgType",type:"select",dataCode:"COOPR_ORG_TYPE",hidden:!0}],selectedVal:"",dialogVisible:!1,dataUrl:backend.riskmService+"/api/coopr/org/pop",tableColumns:[{label:"合作机构编号",prop:"cooprOrgNo",sortable:!0,resizable:!0},{label:"合作机构名称",prop:"cooprOrgName",sortable:!0,resizable:!0},{label:"公司地址",prop:"compAddr",sortable:!0,resizable:!0,hidden:!0},{label:"联系人姓名",prop:"linkName",sortable:!0,resizable:!0,hidden:!0},{label:"联系人手机号",prop:"linkPhone",sortable:!0,resizable:!0,hidden:!0},{label:"联系电话",prop:"linkTel",sortable:!0,resizable:!0,hidden:!0},{label:"发送邮箱",prop:"sendEmail",sortable:!0,resizable:!0,hidden:!0},{label:"抄送邮箱",prop:"copyEmail",sortable:!0,resizable:!0,hidden:!0},{label:"一手佣金率",prop:"primCommRate",sortable:!0,resizable:!0,hidden:!0},{label:"二手佣金率",prop:"secdCommRate",sortable:!0,resizable:!0,hidden:!0},{label:"三手佣金率",prop:"thdCommRate",sortable:!0,resizable:!0,hidden:!0},{label:"长账龄佣金率",prop:"longAgeCommRate",sortable:!0,resizable:!0,hidden:!0},{label:"开始合作日期",prop:"startCooprDt",sortable:!0,resizable:!0,hidden:!0},{label:"终止合作日期",prop:"terminateCooprDt",sortable:!0,resizable:!0,hidden:!0},{label:"合作状态",prop:"cooprStatus",sortable:!0,resizable:!0,dataCode:"COOPR_STS"},{label:"合作机构类型",prop:"cooprOrgType",sortable:!0,resizable:!0,dataCode:"COOPR_ORG_TYPE"},{label:"录入人",prop:"inputUserId",sortable:!0,resizable:!0,hidden:!0},{label:"录入机构",prop:"inputOrg",sortable:!0,resizable:!0,hidden:!0},{label:"录入时间",prop:"inputTime",sortable:!0,resizable:!0,hidden:!0},{label:"最后更新人",prop:"lastUpdateUser",sortable:!0,resizable:!0,hidden:!0},{label:"最后更新机构",prop:"lastUpdateOrg",sortable:!0,resizable:!0,hidden:!0},{label:"最后更新时间",prop:"lastUpdateTime",sortable:!0,resizable:!0,hidden:!0}]}},methods:{tableLoaded:function(){this.$nextTick(function(){this.myLoading=!1})},clickFn:function(){this.$emit("click-fn",this)},onIconClickFn:function(e){this.disabled||this.params&&"function"==typeof this.params.baseParams&&(this.fixedParams=this.params.baseParams(),!1===this.fixedParams)||(this.queryFlag=!1,this.dialogVisible=!0,this.$nextTick(function(){this.queryFlag=!0,this.myLoading=!0,this.selections=[],this.$refs.mytable.remoteData(this.fixedParams)}))},queryClick:function(e,a){if(a){var l={cooprOrgType:this.params.cooprOrgType};e.cooprOrgType=l,yufp.extend(l,e),null!=this.fixedParams&&"object"==_typeof(this.fixedParams)&&yufp.extend(l,this.fixedParams),this.myLoading=!0,this.selections=[],this.$refs.mytable.remoteData(l)}},rowClickFn:function(e){this.selections=this.$refs.mytable.selections},confirmFn:function(){this.selections.length<1?this.$message("请先选择一条数据"):(this.params&&"CNNAME"==this.params.showType?this.selectedVal=this.selections[0].orgName:this.selectedVal=this.selections[0].orgCode,this.$emit("input",this.selections[0].orgCode),this.params&&"function"==typeof this.params.valid&&0==this.params.valid()?this.selectedVal="":(this.$emit("select-fn",this.selections[0].cooprOrgNo,this.selections[0]),this.dialogVisible=!1))},getRawValue:function(){return this.selectedVal},convertKey:function(e){return e}},mounted:function(){if(this.selectedVal=this.rawValue?this.rawValue:this.value,void 0!==this.params&&null!=this.params){var e=this.params.dataUrl;void 0!==e&&null!=e&&""!=e&&(this.dataUrl=e)}},watch:{value:function(e){this.params&&"CNNAME"==this.params.showType||(this.selectedVal=e)},rawValue:function(e){this.selectedVal=e},params:function(e){this.params=e,this.cooprOrgType=this.params.cooprOrgType,this.$refs.mytable.remoteData({cooprOrgType:this.cooprOrgType})}}})}(Vue,yufp.$);