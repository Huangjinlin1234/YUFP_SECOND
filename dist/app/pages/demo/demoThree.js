define(["./libs/jquery-ui/jquery-ui-1.10.3.custom.min.js","./libs/editor/libs/prototype-1.5.1.js","./libs/editor/libs/jquery.autogrow-textarea.js","./libs/editor/libs/path_parser.js","./libs/editor/editor/oryx.debug.js","./libs/editor/editor/i18n/translation_en_us.js","./libs/editor/editor/i18n/translation_signavio_en_us.js","./libs/editor/eventbus.js","./libs/editor/createcommand.js","./libs/editor/toolbar.js","./libs/editor/toolbar-default-actions.js","./custom/plugins/yufp.directive.js","./libs/editor/editor/css/editor.css?v=2","./libs/bootstrap_3.1.1/css/bootstrap.min.css","./libs/editor/styles/style-common.css","./libs/editor/styles/style-editor.css","./libs/editor/styles/style.css"],function(e,t){t.ready=function(e,t,n){var O={};O.editorFactory=yufp.$.Deferred(),O.forceSelectionRefresh=!1,O.ignoreChanges=!1,O.staticIncludeVersion=Date.now();KISBPM.TOOLBAR_CONFIG.items;var i,E=yufp.custom.vue({el:n.el,data:function(){return{height:460,deleteTitle:"",morphTitle:"",quickMenuItems:null,toolBarItems:KISBPM.TOOLBAR_CONFIG.items,draggableOptions:{onStart:function(e,t){O.startDragCallbackQuickMenu(e,t)},onDrag:function(e,t){O.dragCallbackQuickMenu(e,t)}},droppableOptions:{onDrop:function(e,t){O.dropCallback(e,t)},onOver:function(e,t){O.overCallback(e,t)},onOut:function(e,t){O.outCallback(e,t)}}}},methods:{deleteShapeFn:function(){void 0!==O.oryxEditPlugin&&null!==O.oryxEditPlugin||(O.oryxEditPlugin=new ORYX.Plugins.Edit(O.editor)),O.oryxEditPlugin.editDelete()},morphShapeFn:function(){},quickAddItem:function(e){O.quickAddItem(e)},toolbarButtonClicked:function(e){var t=this.toolBarItems[e],n={$scope:O,$rootScope:O};!function(e,t){for(var n=Array.prototype.slice.call(arguments).splice(2),i=e.split("."),o=i.pop(),r=0;r<i.length;r++)t=t[i[r]];console.log(t[o]),console.log(n),t[o].apply(this,n)}(t.action,window,n);var i={type:KISBPM.eventBus.EVENT_TYPE_TOOLBAR_BUTTON_CLICKED,toolbarItem:t};KISBPM.eventBus.dispatch(i.type,i)}}});function o(){var e=JSON.parse('{"modelId":"4d9bc274-84f0-48d6-b3e4-badf21776a7d","name":"dd","key":"dd","description":"","lastUpdated":"2018-05-26T23:38:11.501+0000","lastUpdatedBy":"admin","model":{"id":"canvas","resourceId":"canvas","stencilset":{"namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"properties":{"process_id":"dd","name":"dd"},"childShapes":[{"bounds":{"lowerRight":{"x":130,"y":193},"upperLeft":{"x":100,"y":163}},"childShapes":[],"dockers":[],"outgoing":[],"resourceId":"startEvent1","stencil":{"id":"StartNoneEvent"}}],"modelType":"model"}}');O.editor=new ORYX.Editor(e),O.modelData=e}O.dropCallback=function(e,t){if(O.editor.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeRepo.attached"}),O.editor.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeRepo.added"}),O.editor.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeMenu"}),KISBPM.eventBus.dispatch(KISBPM.eventBus.EVENT_TYPE_HIDE_SHAPE_BUTTONS),O.dragCanContain){var n=O.getStencilItemById(t.draggable[0].id),i={x:e.pageX,y:e.pageY},o=1;if(!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI))if(0<=navigator.userAgent.indexOf("MSIE")){var r=Math.round(screen.deviceXDPI/screen.logicalXDPI*100);100!==r&&(o=r/100)}var s=O.editor.getCanvas().node.getScreenCTM();i.x-=s.e/o,i.y-=s.f/o,i.x/=s.a,i.y/=s.d,i.x-=document.documentElement.scrollLeft,i.y-=document.documentElement.scrollTop;var a=O.dragCurrentParent.absoluteXY();i.x-=a.x,i.y-=a.y;for(var l=void 0,c=O.editor.getStencilSets().values(),d=0;d<c.length;d++){for(var u=c[d],p=u.nodes(),h=0;h<p.length;h++)if(p[h].idWithoutNs()===t.draggable[0].id){l=p[h];break}if(!l){var g=u.edges();for(h=0;h<g.length;h++)if(g[h].idWithoutNs()===t.draggable[0].id){l=g[h];break}}}if(!l)return;if(O.quickMenu){var f=O.editor.getSelection();if(f&&1==f.length){var v=f.first();if((I={}).type=v.getStencil().namespace()+t.draggable[0].id,I.namespace=v.getStencil().namespace(),I.connectedShape=v,I.parent=O.dragCurrentParent,I.containedStencil=l,!e.ctrlKey){var S=v.bounds.center();Math.abs(S.x-i.x)<20&&(i.x=S.x),Math.abs(S.y-i.y)<20&&(i.y=S.y)}if(I.position=i,"SequenceFlow"!==l.idWithoutNs()&&"Association"!==l.idWithoutNs()&&"MessageFlow"!==l.idWithoutNs()&&"DataAssociation"!==l.idWithoutNs()){var m={sourceShape:v,targetStencil:l},y=$scope.editor.getRules().connectMorph(m);if(!y)return;I.connectingType=y.id()}var E=new KISBPM.CreateCommand(I,O.dropTargetElement,i,O.editor);O.editor.executeCommands([E])}}else{var I,C=!1;"BoundaryErrorEvent"!==l.idWithoutNs()&&"BoundaryTimerEvent"!==l.idWithoutNs()&&"BoundarySignalEvent"!==l.idWithoutNs()&&"BoundaryMessageEvent"!==l.idWithoutNs()&&"BoundaryCancelEvent"!==l.idWithoutNs()&&"BoundaryCompensationEvent"!==l.idWithoutNs()||(i=O.editor.eventCoordinates(e),C=!0),(I={}).type=O.modelData.model.stencilset.namespace+n.id,I.namespace=O.modelData.model.stencilset.namespace,I.position=i,I.parent=O.dragCurrentParent;E=new(ORYX.Core.Command.extend({construct:function(e,t,n,i,o){this.option=e,this.docker=null,this.dockedShape=t,this.dockedShapeParent=t.parent||o.getCanvas(),this.position=i,this.facade=o,this.selection=this.facade.getSelection(),this.shape=null,this.parent=null,this.canAttach=n},execute:function(){this.shape?this.parent&&this.parent.add(this.shape):(this.shape=this.facade.createShape(I),this.parent=this.shape.parent),this.canAttach&&this.shape.dockers&&this.shape.dockers.length&&(this.docker=this.shape.dockers[0],this.dockedShapeParent.add(this.docker.parent),this.docker.setDockedShape(void 0),this.docker.bounds.centerMoveTo(this.position),this.dockedShape!==this.facade.getCanvas()&&this.docker.setDockedShape(this.dockedShape),this.facade.setSelection([this.docker.parent])),this.facade.getCanvas().update(),this.facade.updateSelection()},rollback:function(){this.shape&&(this.facade.setSelection(this.selection.without(this.shape)),this.facade.deleteShape(this.shape)),this.canAttach&&this.docker&&this.docker.setDockedShape(void 0),this.facade.getCanvas().update(),this.facade.updateSelection()}}))(I,O.dragCurrentParent,C,i,O.editor);O.editor.executeCommands([E]);var T={type:KISBPM.eventBus.EVENT_TYPE_ITEM_DROPPED,droppedItem:n,position:i};KISBPM.eventBus.dispatch(T.type,T)}}O.dragCurrentParent=void 0,O.dragCurrentParentId=void 0,O.dragCurrentParentStencil=void 0,O.dragCanContain=void 0,O.quickMenu=void 0,O.dropTargetElement=void 0},O.overCallback=function(e,t){O.dragModeOver=!0},O.outCallback=function(e,t){O.dragModeOver=!1},O.startDragCallbackQuickMenu=function(e,t){O.dragModeOver=!1,O.quickMenu=!0},O.dragCallbackQuickMenu=function(e,t){if(0!=O.dragModeOver){var n=O.editor.eventCoordinatesXY(e.pageX,e.pageY),i=1;if(!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI))if(0<=navigator.userAgent.indexOf("MSIE")){var o=Math.round(screen.deviceXDPI/screen.logicalXDPI*100);100!==o&&(i=o/100)}1!==i&&(n.x=n.x/i,n.y=n.y/i);var r=O.editor.getCanvas().getAbstractShapesAtPosition(n);if(r.length<=0&&e.helper)return $scope.dragCanContain=!1;r[0]instanceof ORYX.Core.Canvas&&O.editor.getCanvas().setHightlightStateBasedOnX(n.x);for(var s=void 0,a=O.editor.getStencilSets().values(),l=0;l<a.length;l++){for(var c=a[l],d=c.nodes(),u=0;u<d.length;u++)if(d[u].idWithoutNs()===e.target.id){s=d[u];break}if(!s){var p=c.edges();for(u=0;u<p.length;u++)if(p[u].idWithoutNs()===e.target.id){s=p[u];break}}}var h=r.last(),g=!1;if("node"===s.type()){var f=O.editor.getRules().canContain({containingShape:h,containedStencil:s});if(!(C=r.reverse().find(function(e){return e instanceof ORYX.Core.Canvas||e instanceof ORYX.Core.Node||e instanceof ORYX.Core.Edge})))return O.dragCanContain=!1;O.dragCurrentParent=C,O.dragCurrentParentId=C.id,O.dragCurrentParentStencil=C.getStencil().id(),O.dragCanContain=f,O.dropTargetElement=C,g=f}else{var v=O.editor.getSelection();if(v&&1==v.length){var S=v.first(),m=h,y=!1,E=O.getStencilItemById(m.getStencil().idWithoutNs());if(E){var I=!1;if("Association"!==s.idWithoutNs()||"TextAnnotation"!==m.getStencil().idWithoutNs()&&"BoundaryCompensationEvent"!==m.getStencil().idWithoutNs()?"DataAssociation"===s.idWithoutNs()&&"DataStore"===m.getStencil().idWithoutNs()&&(I=!0):I=!0,E.canConnectTo||I)for(;!y&&m&&!(m instanceof ORYX.Core.Canvas);)h=m,y=O.editor.getRules().canConnect({sourceShape:S,edgeStencil:s,targetShape:m}),m=m.parent}var C=O.editor.getCanvas();g=y,O.dragCurrentParent=C,O.dragCurrentParentId=C.id,O.dragCurrentParentStencil=C.getStencil().id(),O.dragCanContain=y,O.dropTargetElement=h}}O.editor.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_SHOW,highlightId:"shapeMenu",elements:[h],color:g?ORYX.CONFIG.SELECTION_VALID_COLOR:ORYX.CONFIG.SELECTION_INVALID_COLOR})}},ORYX._loadPlugins(),o(),O.safeApply=function(e){e()},O.editorFactory.then(function(){O.formItems=void 0,KISBPM.eventBus.editor=O.editor,[{oryxType:ORYX.CONFIG.EVENT_SELECTION_CHANGED,kisBpmType:KISBPM.eventBus.EVENT_TYPE_SELECTION_CHANGE},{oryxType:ORYX.CONFIG.EVENT_DBLCLICK,kisBpmType:KISBPM.eventBus.EVENT_TYPE_DOUBLE_CLICK},{oryxType:ORYX.CONFIG.EVENT_MOUSEOUT,kisBpmType:KISBPM.eventBus.EVENT_TYPE_MOUSE_OUT},{oryxType:ORYX.CONFIG.EVENT_MOUSEOVER,kisBpmType:KISBPM.eventBus.EVENT_TYPE_MOUSE_OVER}].forEach(function(t){O.editor.registerOnEvent(t.oryxType,function(e){KISBPM.eventBus.dispatch(t.kisBpmType,e)})}),KISBPM.eventBus.dispatch(KISBPM.eventBus.EVENT_TYPE_EDITOR_READY,{type:KISBPM.eventBus.EVENT_TYPE_EDITOR_READY}),ACTIVITI_EDITOR_TOUR.gettingStarted($scope,$translate,$q,!0)}),yufp.$(window).resize(function(){var e=jQuery("#editor-header").offset(),t=jQuery("#propertySection").height(),n=jQuery("#canvasSection"),i=jQuery("#main-header");if(null!=e&&null!==e&&null!=t&&null!=n&&null!==i){if(O.editor){var o=O.editor.selection,r=O.editor._subSelection;$scope.selectedElements=o,$scope.subSelectionElements=r,o&&0<o.length&&(O.selectedElementBeforeScrolling=o[0],O.editor.setSelection([]),O.editor.setSelection($scope.selectedElements,$scope.subSelectionElements),$scope.selectedElements=void 0,$scope.subSelectionElements=void 0)}var s=jQuery(window).height()-e.top-i.height()-21;n.height(s-t),jQuery("#paletteSection").height(s);var a=null;n&&n[0].children[1]&&(a=n[0].children[1]);var l=n.position().top,c=n.position().left,d=n[0].clientHeight,u=n[0].clientWidth,p=0,h=0;a&&(h=a.clientWidth||a.parentNode.clientWidth),h<n[0].clientWidth&&(c-=(p=h-n[0].clientWidth)/2,u+=p);var g=jQuery("#canvas-grow-N");g.css("top",l+20+"px"),g.css("left",c-10+(u-17)/2+"px");var f=jQuery("#canvas-grow-S");f.css("top",l+d-20-8+"px"),f.css("left",c-10+(u-17)/2+"px");var v=jQuery("#canvas-grow-E");v.css("top",l-10+(d-17)/2+"px"),v.css("left",c+u-20-8+"px");var S=jQuery("#canvas-grow-W");S.css("top",l-10+(d-17)/2+"px"),S.css("left",c+20+"px"),(g=jQuery("#canvas-shrink-N")).css("top",l+20+"px"),g.css("left",c+10+(u-17)/2+"px"),(f=jQuery("#canvas-shrink-S")).css("top",l+d-20-8+"px"),f.css("left",c+10+(u-17)/2+"px"),(v=jQuery("#canvas-shrink-E")).css("top",l+10+(d-17)/2+"px"),v.css("left",c+u-20-8+"px"),(S=jQuery("#canvas-shrink-W")).css("top",l+10+(d-17)/2+"px"),S.css("left",c+20+"px")}}),yufp.$(window).trigger("resize"),jQuery.fn.scrollStopped=function(t){jQuery(this).scroll(function(){var e=jQuery(this);e.data("scrollTimeout")&&clearTimeout(e.data("scrollTimeout")),e.data("scrollTimeout",setTimeout(t,50,this))})},O.editorInitialized=!0,(i=yufp.$("#canvasSection")).scroll(function(){var e=O.editor.selection,t=O.editor._subSelection;O.selectedElements=e,O.subSelectionElements=t,e&&0<e.length&&(O.selectedElementBeforeScrolling=e[0]),jQuery(".Oryx_button").each(function(e,t){O.orginalOryxButtonStyle=t.style.display,t.style.display="none"}),jQuery(".resizer_southeast").each(function(e,t){O.orginalResizerSEStyle=t.style.display,t.style.display="none"}),jQuery(".resizer_northwest").each(function(e,t){O.orginalResizerNWStyle=t.style.display,t.style.display="none"}),O.editor.handleEvents({type:ORYX.CONFIG.EVENT_CANVAS_SCROLL})}),i.scrollStopped(function(){function n(e){0<jQuery(e).position().top?e.style.display="block":e.style.display="none"}O.editor.setSelection([]),O.editor.setSelection(O.selectedElements,O.subSelectionElements),O.selectedElements=void 0,O.subSelectionElements=void 0,jQuery(".Oryx_button").each(function(e,t){n(t)}),jQuery(".resizer_southeast").each(function(e,t){n(t)}),jQuery(".resizer_northwest").each(function(e,t){n(t)})}),O.getStencilItemById=function(e){for(var t=0;t<O.stencilItemGroups.length;t++){var n=O.stencilItemGroups[t];if(null!==n.items&&void 0!==n.items){var i=O.findStencilItemInGroup(e,n);if(i)return i}else if(n.id===e)return n}},O.findStencilItemInGroup=function(e,t){for(var n,i=0;i<t.items.length;i++)if((n=t.items[i]).id===e)return n;if(t.groups&&0<t.groups.length)for(var o=0;o<t.groups.length;o++)if(n=$scope.findStencilItemInGroup(e,t.groups[o]))return n},O.quickAddItem=function(d){O.safeApply(function(){var e=O.editor.getSelection();if(e&&1==e.length){O.currentSelectedShape=e.first();for(var t=void 0,n=O.editor.getStencilSets().values(),i=0;i<n.length;i++)for(var o=n[i].nodes(),r=0;r<o.length;r++)if(o[r].idWithoutNs()===d){t=o[r];break}if(!t)return;var s={type:O.currentSelectedShape.getStencil().namespace()+d,namespace:O.currentSelectedShape.getStencil().namespace()};s.connectedShape=O.currentSelectedShape,s.parent=O.currentSelectedShape.parent,s.containedStencil=t;var a={sourceShape:O.currentSelectedShape,targetStencil:t},l=O.editor.getRules().connectMorph(a);if(!l)return;s.connectingType=l.id();var c=new KISBPM.CreateCommand(s,void 0,void 0,O.editor);O.editor.executeCommands([c])}})};var I=[],C=function(e,t){for(var n=0;n<t.length;n++)if(t[n].name===e)return t[n];return null},T=function(e,t){var n={name:e,items:[],paletteItems:[],groups:[],visible:!0};return t.push(n),n};yufp.service.request({method:"GET",url:"app/rest/stencil-sets/editor",data:null,callback:function(e,t,n){r(n.data)}});var r=function(e){e.stencils=JSON.parse(e.stencils);for(var t=["UserTask","EndNoneEvent","ExclusiveGateway","CatchTimerEvent","ThrowNoneEvent","TextAnnotation","SequenceFlow","Association"],n=["SequenceFlow","MessageFlow","Association","DataAssociation","DataStore","SendTask"],i=[],o=[],r=0;r<e.rules.morphingRules.length;r++){var s={role:e.rules.morphingRules[r].role,morphOptions:[]};o.push(s)}for(var a=0;a<e.stencils.length;a++){var l=e.stencils[a].groups[0];if("Diagram"!==l&&"Form"!==l){var c=!1;e.stencils[a].removed&&(c=!0);var d=void 0;if(!c&&null!=l&&0<l.length){null===(d=C(l,I))&&(d=T(l,I));for(var u=1;u<e.stencils[a].groups.length;u++){var p=e.stencils[a].groups[u],h=C(p,d.groups);null===h&&(h=T(p,d.groups)),d=h}}var g={id:e.stencils[a].id,name:e.stencils[a].title,description:e.stencils[a].description,icon:e.stencils[a].icon,type:e.stencils[a].type,roles:e.stencils[a].roles,removed:c,customIcon:!1,canConnect:!1,canConnectTo:!1,canConnectAssociation:!1};e.stencils[a].customIconId&&0<e.stencils[a].customIconId&&(g.customIcon=!0,g.icon=e.stencils[a].customIconId),c||0<=t.indexOf(g.id)&&(i[t.indexOf(g.id)]=g),"TextAnnotation"!==g.id&&"BoundaryCompensationEvent"!==g.id||(g.canConnectAssociation=!0);for(r=0;r<e.stencils[a].roles.length;r++){var f=e.stencils[a].roles[r];"sequence_start"===f?g.canConnect=!0:"sequence_end"===f&&(g.canConnectTo=!0);for(var v=0;v<o.length;v++)if(f===o[v].role){c||o[v].morphOptions.push(g),g.morphRole=o[v].role;break}}d?(d.items.push(g),n.indexOf(g.id)<0&&d.paletteItems.push(g)):c||I.push(g)}}for(r=0;r<I.length;r++)I[r].paletteItems&&0==I[r].paletteItems.length&&(I[r].visible=!1);O.stencilItemGroups=I;var S=[];for(r=0;r<e.rules.containmentRules.length;r++){var m=e.rules.containmentRules[r];S.push(m)}O.containmentRules=S;var y=[];for(r=0;r<i.length;r++)i[r]&&(y[y.length]=i[r]);O.quickMenuItems=y,E.quickMenuItems=y,O.morphRoles=o};O.editor.registerOnEvent(ORYX.CONFIG.EVENT_SELECTION_CHANGED,function(e){var t=e.elements,n=!1;if(t&&0==t.length&&(t=[O.editor.getCanvas()],n=!0),t&&0<t.length){var i=t.first(),o=i.getStencil();if(O.selectedElementBeforeScrolling&&-1!==o.id().indexOf("BPMNDiagram"))return;if(O.selectedElementBeforeScrolling&&O.selectedElementBeforeScrolling.getId()===i.getId())return void(O.selectedElementBeforeScrolling=null);if(O.previousSelectedShape=O.selectedShape,void 0!==O.selectedShape&&O.selectedShape.getId()===i.getId()){if(!O.forceSelectionRefresh)return;O.forceSelectionRefresh=!1}var r={title:"",properties:[]};n&&(r.auditData={author:O.modelData.createdByUser,createDate:O.modelData.createDate}),O.safeApply(function(){O.selectedItem=r,O.selectedShape=i})}else $sco$rootScopepe.safeApply(function(){O.selectedItem={},O.selectedShape=null})}),O.editor.registerOnEvent(ORYX.CONFIG.EVENT_SELECTION_CHANGED,function(e){KISBPM.eventBus.dispatch(KISBPM.eventBus.EVENT_TYPE_HIDE_SHAPE_BUTTONS);var t=e.elements;if(t&&1==t.length){var n=t.first(),i=O.editor.getCanvas().node.getScreenCTM(),o=n.absoluteXY();o.x*=i.a,o.y*=i.d;var r=1;if(!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI))if(0<=navigator.userAgent.indexOf("MSIE")){var s=Math.round(screen.deviceXDPI/screen.logicalXDPI*100);100!==s&&(r=s/100)}if(1===r)o.y=o.y-jQuery("#canvasSection").offset().top+5,o.x=o.x-jQuery("#canvasSection").offset().left;else{var a=jQuery("#canvasSection").offset().left,l=jQuery("#canvasSection").scrollLeft(),c=jQuery("#canvasSection").scrollTop(),d=i.e-a*r,u=0;10<d&&(u=d/r-d),o.y=o.y-jQuery("#canvasSection").offset().top*r+5+(c*r-c),o.x=o.x-a*r+u+(l*r-l)}var p=new ORYX.Core.Bounds(i.e+o.x,i.f+o.y,i.e+o.x+i.a*n.bounds.width(),i.f+o.y+i.d*n.bounds.height()),h=p.upperLeft(),g=O.getStencilItemById(n.getStencil().idWithoutNs()),f=[];if(g&&g.morphRole)for(var v=0;v<O.morphRoles.length;v++)O.morphRoles[v].role===g.morphRole&&(f=O.morphRoles[v].morphOptions);var S=h.x;if(p.width()<48&&(S-=24),f&&0<f.length){var m=document.getElementById("morph-button");m.style.display="block",m.style.left=S+24+"px",m.style.top=h.y+p.height()+2+"px"}var y=document.getElementById("delete-button");if(y.style.display="block",y.style.left=S+"px",y.style.top=h.y+p.height()+2+"px",g&&(g.canConnect||g.canConnectAssociation)){var E=0,I=h.x+p.width()+5,C=h.y;jQuery(".Oryx_button").each(function(e,t){"morph-button"!==t.id&&"delete-button"!=t.id&&(3<++E?(I=h.x+p.width()+5,C+=24,E=1):1<E&&(I+=24),t.style.display="block",t.style.left=I+"px",t.style.top=C+"px")})}}}),KISBPM.eventBus.addListener(KISBPM.eventBus.EVENT_TYPE_HIDE_SHAPE_BUTTONS,function(e){jQuery(".Oryx_button").each(function(e,t){t.style.display="none"})}),KISBPM.eventBus.addListener(KISBPM.eventBus.EVENT_TYPE_PROPERTY_VALUE_CHANGED,function(e){e.property&&e.property.key&&("oryx-name"===e.property.key&&void 0!==$scope.selectedItem&&null!==$scope.selectedItem&&($scope.selectedItem.title=e.newValue),e.property.noValue=void 0===e.property.value||null===e.property.value||0==e.property.value.length)}),KISBPM.eventBus.addListener(KISBPM.eventBus.EVENT_TYPE_SHOW_VALIDATION_POPUP,function(e){O.currentValidationId=e.validationId,O.isOnProcessLevel=e.onProcessLevel,_internalCreateModal({template:"editor-app/popups/validation-errors.html?version="+Date.now()},$modal,O)}),KISBPM.eventBus.addListener(KISBPM.eventBus.EVENT_TYPE_NAVIGATE_TO_PROCESS,function(e){var t=O.editor.getModelMetaData();O.editorHistory.push({id:t.modelId,name:t.name,type:"bpmnmodel"}),$window.location.href="../editor/#/editor/"+e.processId}),O.stencilInitialized=!0,O.morphShape=function(){O.safeApply(function(){var e=O.editor.getSelection();if(e&&1==e.length){O.currentSelectedShape=e.first();for(var t=O.getStencilItemById(O.currentSelectedShape.getStencil().idWithoutNs()),n=[],i=0;i<O.morphRoles.length;i++)O.morphRoles[i].role===t.morphRole&&(n=O.morphRoles[i].morphOptions.slice());O.morphShapes=n,_internalCreateModal({backdrop:!1,keyboard:!0,template:"editor-app/popups/select-shape.html?version="+Date.now()},$modal,O)}})},O.deleteShape=function(){KISBPM.TOOLBAR.ACTIONS.deleteItem({$scope:$scope})},O.quickAddItem=function(d){O.safeApply(function(){var e=O.editor.getSelection();if(e&&1==e.length){O.currentSelectedShape=e.first();for(var t=void 0,n=O.editor.getStencilSets().values(),i=0;i<n.length;i++)for(var o=n[i].nodes(),r=0;r<o.length;r++)if(o[r].idWithoutNs()===d){t=o[r];break}if(!t)return;var s={type:O.currentSelectedShape.getStencil().namespace()+d,namespace:O.currentSelectedShape.getStencil().namespace()};s.connectedShape=O.currentSelectedShape,s.parent=O.currentSelectedShape.parent,s.containedStencil=t;var a={sourceShape:O.currentSelectedShape,targetStencil:t},l=O.editor.getRules().connectMorph(a);if(!l)return;s.connectingType=l.id();var c=new KISBPM.CreateCommand(s,void 0,void 0,O.editor);O.editor.executeCommands([c])}})}},t.onmessage=function(e,t){},t.destroy=function(e,t){}});