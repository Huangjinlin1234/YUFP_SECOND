define(function(e,s){s.ready=function(e,s,o){var t=function(){var e=$("#userCode").val(),s=$("#oldPassword").val(),o=$("#newPassword").val(),t=$("#passwords").val(),r=/((?=.*[a-zA-Z])(?=.*\d)|(?=.*[a-zA-Z])(?=.*[~!@#$%^&*])|(?=.*\d)(?=.*[~!@#$%^&*])|(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*]))[a-zA-Z\d~!@#$%^&*]{5,16}/;if(""==e)return $("#msg").text("请输入用户名!").show(),void $("#userCode").focus();if(""==s)return $("#msg").text("请输入原密码!").show(),void $("#oldPassword").focus();if(null==o||""==o)return $("#msg").text("请输入新密码!").show(),void $("#newPassword").focus();if(!r.test(o))return $("#msg").text("不符合密码规则，请遵守密码规则(见网页底部)").show(),void $("#newPassword").focus();if(null==t||""==t)return $("#msg").text("请再次输入新密码!").show(),void $("#passwords").focus();if(o==t){if(!r.test(t))return $("#msg").text("不符合密码规则，请遵守密码规则(见网页底部)").show(),void $("#passwords").focus();$("#msg").hide();var n=new JSEncrypt;n.setPublicKey("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDAYwQ81rc1KW8tTYpxrLS3ArVxB40otmbWyXwgDQRkLsCuQKiq6KZgAM/8sJuI12S1JVOXnMu5d420vKFFS/+Ibz4TxqjhLmgownaguMTbAGBzIPvfN5lL52mDmm/CvKu2YPCFvZV8YulNTCexvuj7OiWRUXpAbaQqu5tPOjGytQIDAQAB");var u={usercode:e,password:n.encrypt(s),newPassword:n.encrypt(o)};yufp.service.request({method:"POST",url:backend.uaaService+"/api/account/modifyUserPwd",data:u,callback:function(e,s,o){0==e&&o&&0==o.code?(alert("修改用户密码操作成功，请重新登录！"),setTimeout(function(){yufp.router.to("login")},1e3)):o&&o.message?$("#msg").text(o.message).show():$("#msg").text("修改用户密码操作失败！").show()}})}else $("#msg").text("两次密码不一致，请重新输入!").show()};$("#submitFn").click(function(){t()}),$("#resetFn").click(function(){$("#userCode").val(""),$("#oldPassword").val(""),$("#newPassword").val(""),$("#passwords").val("")}),$("#userCode").keyup(function(){"13"==event.keyCode&&t()}),$("#oldPassword").keyup(function(){"13"==event.keyCode&&t()}),$("#newPassword").keyup(function(){"13"==event.keyCode&&t()}),$("#passwords").keyup(function(){"13"==event.keyCode&&t()})}});